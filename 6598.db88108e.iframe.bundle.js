"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[6598],{"./packages/core-data/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{IO:function(){return EntityProvider},h:function(){return store},XY:function(){return useEntityBlockEditor},U3:function(){return useEntityId},Mi:function(){return useEntityProp},zk:function(){return useEntityRecord},ZH:function(){return useEntityRecords},ip:function(){return useResourcePermissions}});var build_module_actions_namespaceObject={};__webpack_require__.r(build_module_actions_namespaceObject),__webpack_require__.d(build_module_actions_namespaceObject,{__experimentalBatch:function(){return __experimentalBatch},__experimentalReceiveCurrentGlobalStylesId:function(){return __experimentalReceiveCurrentGlobalStylesId},__experimentalReceiveThemeBaseGlobalStyles:function(){return __experimentalReceiveThemeBaseGlobalStyles},__experimentalReceiveThemeGlobalStyleVariations:function(){return __experimentalReceiveThemeGlobalStyleVariations},__experimentalSaveSpecifiedEntityEdits:function(){return __experimentalSaveSpecifiedEntityEdits},__unstableCreateUndoLevel:function(){return __unstableCreateUndoLevel},addEntities:function(){return addEntities},deleteEntityRecord:function(){return deleteEntityRecord},editEntityRecord:function(){return editEntityRecord},receiveAutosaves:function(){return receiveAutosaves},receiveCurrentTheme:function(){return receiveCurrentTheme},receiveCurrentUser:function(){return receiveCurrentUser},receiveEmbedPreview:function(){return receiveEmbedPreview},receiveEntityRecords:function(){return receiveEntityRecords},receiveNavigationFallbackId:function(){return receiveNavigationFallbackId},receiveThemeGlobalStyleRevisions:function(){return receiveThemeGlobalStyleRevisions},receiveThemeSupports:function(){return receiveThemeSupports},receiveUploadPermissions:function(){return receiveUploadPermissions},receiveUserPermission:function(){return receiveUserPermission},receiveUserQuery:function(){return receiveUserQuery},redo:function(){return redo},saveEditedEntityRecord:function(){return saveEditedEntityRecord},saveEntityRecord:function(){return saveEntityRecord},undo:function(){return undo}});var build_module_selectors_namespaceObject={};__webpack_require__.r(build_module_selectors_namespaceObject),__webpack_require__.d(build_module_selectors_namespaceObject,{__experimentalGetCurrentGlobalStylesId:function(){return __experimentalGetCurrentGlobalStylesId},__experimentalGetCurrentThemeBaseGlobalStyles:function(){return __experimentalGetCurrentThemeBaseGlobalStyles},__experimentalGetCurrentThemeGlobalStylesVariations:function(){return __experimentalGetCurrentThemeGlobalStylesVariations},__experimentalGetDirtyEntityRecords:function(){return __experimentalGetDirtyEntityRecords},__experimentalGetEntitiesBeingSaved:function(){return __experimentalGetEntitiesBeingSaved},__experimentalGetEntityRecordNoResolver:function(){return __experimentalGetEntityRecordNoResolver},__experimentalGetTemplateForLink:function(){return __experimentalGetTemplateForLink},canUser:function(){return canUser},canUserEditEntityRecord:function(){return canUserEditEntityRecord},getAuthors:function(){return getAuthors},getAutosave:function(){return getAutosave},getAutosaves:function(){return getAutosaves},getBlockPatternCategories:function(){return getBlockPatternCategories},getBlockPatterns:function(){return getBlockPatterns},getCurrentTheme:function(){return getCurrentTheme},getCurrentThemeGlobalStylesRevisions:function(){return getCurrentThemeGlobalStylesRevisions},getCurrentUser:function(){return getCurrentUser},getEditedEntityRecord:function(){return getEditedEntityRecord},getEmbedPreview:function(){return getEmbedPreview},getEntitiesByKind:function(){return getEntitiesByKind},getEntitiesConfig:function(){return getEntitiesConfig},getEntity:function(){return getEntity},getEntityConfig:function(){return getEntityConfig},getEntityRecord:function(){return getEntityRecord},getEntityRecordEdits:function(){return getEntityRecordEdits},getEntityRecordNonTransientEdits:function(){return getEntityRecordNonTransientEdits},getEntityRecords:function(){return getEntityRecords},getLastEntityDeleteError:function(){return getLastEntityDeleteError},getLastEntitySaveError:function(){return getLastEntitySaveError},getNavigationFallbackId:function(){return getNavigationFallbackId},getRawEntityRecord:function(){return getRawEntityRecord},getRedoEdit:function(){return getRedoEdit},getReferenceByDistinctEdits:function(){return getReferenceByDistinctEdits},getThemeSupports:function(){return getThemeSupports},getUndoEdit:function(){return getUndoEdit},getUserQueryResults:function(){return getUserQueryResults},hasEditsForEntityRecord:function(){return hasEditsForEntityRecord},hasEntityRecords:function(){return hasEntityRecords},hasFetchedAutosaves:function(){return hasFetchedAutosaves},hasRedo:function(){return hasRedo},hasUndo:function(){return hasUndo},isAutosavingEntityRecord:function(){return isAutosavingEntityRecord},isDeletingEntityRecord:function(){return isDeletingEntityRecord},isPreviewEmbedFallback:function(){return isPreviewEmbedFallback},isRequestingEmbedPreview:function(){return isRequestingEmbedPreview},isSavingEntityRecord:function(){return isSavingEntityRecord}});var resolvers_namespaceObject={};__webpack_require__.r(resolvers_namespaceObject),__webpack_require__.d(resolvers_namespaceObject,{__experimentalGetCurrentGlobalStylesId:function(){return resolvers_experimentalGetCurrentGlobalStylesId},__experimentalGetCurrentThemeBaseGlobalStyles:function(){return resolvers_experimentalGetCurrentThemeBaseGlobalStyles},__experimentalGetCurrentThemeGlobalStylesVariations:function(){return resolvers_experimentalGetCurrentThemeGlobalStylesVariations},__experimentalGetTemplateForLink:function(){return resolvers_experimentalGetTemplateForLink},canUser:function(){return resolvers_canUser},canUserEditEntityRecord:function(){return resolvers_canUserEditEntityRecord},getAuthors:function(){return resolvers_getAuthors},getAutosave:function(){return resolvers_getAutosave},getAutosaves:function(){return resolvers_getAutosaves},getBlockPatternCategories:function(){return resolvers_getBlockPatternCategories},getBlockPatterns:function(){return resolvers_getBlockPatterns},getCurrentTheme:function(){return resolvers_getCurrentTheme},getCurrentThemeGlobalStylesRevisions:function(){return resolvers_getCurrentThemeGlobalStylesRevisions},getCurrentUser:function(){return resolvers_getCurrentUser},getEditedEntityRecord:function(){return resolvers_getEditedEntityRecord},getEmbedPreview:function(){return resolvers_getEmbedPreview},getEntityRecord:function(){return resolvers_getEntityRecord},getEntityRecords:function(){return resolvers_getEntityRecords},getNavigationFallbackId:function(){return resolvers_getNavigationFallbackId},getRawEntityRecord:function(){return resolvers_getRawEntityRecord},getThemeSupports:function(){return resolvers_getThemeSupports}});var build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");var if_matching_action=isMatch=>reducer=>(state,action)=>void 0===state||isMatch(action)?reducer(state,action):state;var replace_action=replacer=>reducer=>(state,action)=>reducer(state,replacer(action));function conservativeMapItem(item,nextItem){if(!item)return nextItem;let hasChanges=!1;const result={};for(const key in nextItem)es6_default()(item[key],nextItem[key])?result[key]=item[key]:(hasChanges=!0,result[key]=nextItem[key]);if(!hasChanges)return item;for(const key in item)result.hasOwnProperty(key)||(result[key]=item[key]);return result}var on_sub_key=actionProperty=>reducer=>function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;const key=action[actionProperty];if(void 0===key)return state;const nextKeyState=reducer(state[key],action);return nextKeyState===state[key]?state:{...state,[key]:nextKeyState}},dist_es2015=__webpack_require__("./node_modules/capital-case/dist.es2015/index.js"),pascal_case_dist_es2015=__webpack_require__("./node_modules/pascal-case/dist.es2015/index.js"),api_fetch_build_module=__webpack_require__("./packages/api-fetch/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");function receiveItems(items,edits){return{type:"RECEIVE_ITEMS",items:Array.isArray(items)?items:[items],persistedEdits:edits}}function removeItems(kind,name,records){let invalidateCache=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:"REMOVE_ITEMS",itemIds:Array.isArray(records)?records:[records],kind:kind,name:name,invalidateCache:invalidateCache}}function receiveQueriedItems(items){let query=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},edits=arguments.length>2?arguments[2]:void 0;return{...receiveItems(items,edits),query:query}}let maxItems=null;async function defaultProcessor(requests){if(null===maxItems){const preflightResponse=await(0,api_fetch_build_module.Z)({path:"/batch/v1",method:"OPTIONS"});maxItems=preflightResponse.endpoints[0].args.requests.maxItems}const results=[];for(const batchRequests of function chunk(arr,chunkSize){const tmp=[...arr],cache=[];for(;tmp.length;)cache.push(tmp.splice(0,chunkSize));return cache}(requests,maxItems)){const batchResponse=await(0,api_fetch_build_module.Z)({path:"/batch/v1",method:"POST",data:{validation:"require-all-validate",requests:batchRequests.map((request=>({path:request.path,body:request.data,method:request.method,headers:request.headers})))}});let batchResults;batchResults=batchResponse.failed?batchResponse.responses.map((response=>({error:null==response?void 0:response.body}))):batchResponse.responses.map((response=>{const result={};return response.status>=200&&response.status<300?result.output=response.body:result.error=response.body,result})),results.push(...batchResults)}return results}class ObservableSet{constructor(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.set=new Set(...args),this.subscribers=new Set}get size(){return this.set.size}add(value){return this.set.add(value),this.subscribers.forEach((subscriber=>subscriber())),this}delete(value){const isSuccess=this.set.delete(value);return this.subscribers.forEach((subscriber=>subscriber())),isSuccess}subscribe(subscriber){return this.subscribers.add(subscriber),()=>{this.subscribers.delete(subscriber)}}}function receiveUserQuery(queryID,users){return{type:"RECEIVE_USER_QUERY",users:Array.isArray(users)?users:[users],queryID:queryID}}function receiveCurrentUser(currentUser){return{type:"RECEIVE_CURRENT_USER",currentUser:currentUser}}function addEntities(entities){return{type:"ADD_ENTITIES",entities:entities}}function receiveEntityRecords(kind,name,records,query){let action,invalidateCache=arguments.length>4&&void 0!==arguments[4]&&arguments[4],edits=arguments.length>5?arguments[5]:void 0;return"postType"===kind&&(records=(Array.isArray(records)?records:[records]).map((record=>"auto-draft"===record.status?{...record,title:""}:record))),action=query?receiveQueriedItems(records,query,edits):receiveItems(records,edits),{...action,kind:kind,name:name,invalidateCache:invalidateCache}}function receiveCurrentTheme(currentTheme){return{type:"RECEIVE_CURRENT_THEME",currentTheme:currentTheme}}function __experimentalReceiveCurrentGlobalStylesId(currentGlobalStylesId){return{type:"RECEIVE_CURRENT_GLOBAL_STYLES_ID",id:currentGlobalStylesId}}function __experimentalReceiveThemeBaseGlobalStyles(stylesheet,globalStyles){return{type:"RECEIVE_THEME_GLOBAL_STYLES",stylesheet:stylesheet,globalStyles:globalStyles}}function __experimentalReceiveThemeGlobalStyleVariations(stylesheet,variations){return{type:"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS",stylesheet:stylesheet,variations:variations}}function receiveThemeSupports(){return(0,deprecated_build_module.Z)("wp.data.dispatch( 'core' ).receiveThemeSupports",{since:"5.9"}),{type:"DO_NOTHING"}}function receiveThemeGlobalStyleRevisions(currentId,revisions){return{type:"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS",currentId:currentId,revisions:revisions}}function receiveEmbedPreview(url,preview){return{type:"RECEIVE_EMBED_PREVIEW",url:url,preview:preview}}const deleteEntityRecord=function(kind,name,recordId,query){let{__unstableFetch:__unstableFetch=api_fetch_build_module.Z,throwOnError:throwOnError=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return async _ref=>{let{dispatch:dispatch}=_ref;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.kind===kind&&config.name===name));let error,deletedRecord=!1;if(!entityConfig||null!=entityConfig&&entityConfig.__experimentalNoFetch)return;const lock=await dispatch.__unstableAcquireStoreLock("core",["entities","records",kind,name,recordId],{exclusive:!0});try{dispatch({type:"DELETE_ENTITY_RECORD_START",kind:kind,name:name,recordId:recordId});let hasError=!1;try{let path=`${entityConfig.baseURL}/${recordId}`;query&&(path=(0,add_query_args.f)(path,query)),deletedRecord=await __unstableFetch({path:path,method:"DELETE"}),await dispatch(removeItems(kind,name,recordId,!0))}catch(_error){hasError=!0,error=_error}if(dispatch({type:"DELETE_ENTITY_RECORD_FINISH",kind:kind,name:name,recordId:recordId,error:error}),hasError&&throwOnError)throw error;return deletedRecord}finally{dispatch.__unstableReleaseStoreLock(lock)}}},editEntityRecord=function(kind,name,recordId,edits){let options=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return _ref2=>{let{select:select,dispatch:dispatch}=_ref2;const entityConfig=select.getEntityConfig(kind,name);if(!entityConfig)throw new Error(`The entity being edited (${kind}, ${name}) does not have a loaded config.`);const{transientEdits:transientEdits={},mergedEdits:mergedEdits={}}=entityConfig,record=select.getRawEntityRecord(kind,name,recordId),editedRecord=select.getEditedEntityRecord(kind,name,recordId),edit={kind:kind,name:name,recordId:recordId,edits:Object.keys(edits).reduce(((acc,key)=>{const recordValue=record[key],editedRecordValue=editedRecord[key],value=mergedEdits[key]?{...editedRecordValue,...edits[key]}:edits[key];return acc[key]=es6_default()(recordValue,value)?void 0:value,acc}),{}),transientEdits:transientEdits};dispatch({type:"EDIT_ENTITY_RECORD",...edit,meta:{undo:!options.undoIgnore&&{...edit,edits:Object.keys(edits).reduce(((acc,key)=>(acc[key]=editedRecord[key],acc)),{})}}})}},undo=()=>_ref3=>{let{select:select,dispatch:dispatch}=_ref3;const undoEdit=select.getUndoEdit();undoEdit&&dispatch({type:"EDIT_ENTITY_RECORD",...undoEdit,meta:{isUndo:!0}})},redo=()=>_ref4=>{let{select:select,dispatch:dispatch}=_ref4;const redoEdit=select.getRedoEdit();redoEdit&&dispatch({type:"EDIT_ENTITY_RECORD",...redoEdit,meta:{isRedo:!0}})};function __unstableCreateUndoLevel(){return{type:"CREATE_UNDO_LEVEL"}}const saveEntityRecord=function(kind,name,record){let{isAutosave:isAutosave=!1,__unstableFetch:__unstableFetch=api_fetch_build_module.Z,throwOnError:throwOnError=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return async _ref5=>{let{select:select,resolveSelect:resolveSelect,dispatch:dispatch}=_ref5;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.kind===kind&&config.name===name));if(!entityConfig||null!=entityConfig&&entityConfig.__experimentalNoFetch)return;const entityIdKey=entityConfig.key||DEFAULT_ENTITY_KEY,recordId=record[entityIdKey],lock=await dispatch.__unstableAcquireStoreLock("core",["entities","records",kind,name,recordId||(0,v4.Z)()],{exclusive:!0});try{for(const[key,value]of Object.entries(record))if("function"==typeof value){const evaluatedValue=value(select.getEditedEntityRecord(kind,name,recordId));dispatch.editEntityRecord(kind,name,recordId,{[key]:evaluatedValue},{undoIgnore:!0}),record[key]=evaluatedValue}let updatedRecord,error;dispatch({type:"SAVE_ENTITY_RECORD_START",kind:kind,name:name,recordId:recordId,isAutosave:isAutosave});let hasError=!1;try{const path=`${entityConfig.baseURL}${recordId?"/"+recordId:""}`,persistedRecord=select.getRawEntityRecord(kind,name,recordId);if(isAutosave){const currentUser=select.getCurrentUser(),currentUserId=currentUser?currentUser.id:void 0,autosavePost=await resolveSelect.getAutosave(persistedRecord.type,persistedRecord.id,currentUserId);let data={...persistedRecord,...autosavePost,...record};if(data=Object.keys(data).reduce(((acc,key)=>(["title","excerpt","content"].includes(key)&&(acc[key]=data[key]),acc)),{status:"auto-draft"===data.status?"draft":data.status}),updatedRecord=await __unstableFetch({path:`${path}/autosaves`,method:"POST",data:data}),persistedRecord.id===updatedRecord.id){let newRecord={...persistedRecord,...data,...updatedRecord};newRecord=Object.keys(newRecord).reduce(((acc,key)=>(["title","excerpt","content"].includes(key)?acc[key]=newRecord[key]:acc[key]="status"===key?"auto-draft"===persistedRecord.status&&"draft"===newRecord.status?newRecord.status:persistedRecord.status:persistedRecord[key],acc)),{}),dispatch.receiveEntityRecords(kind,name,newRecord,void 0,!0)}else dispatch.receiveAutosaves(persistedRecord.id,updatedRecord)}else{let edits=record;entityConfig.__unstablePrePersist&&(edits={...edits,...entityConfig.__unstablePrePersist(persistedRecord,edits)}),updatedRecord=await __unstableFetch({path:path,method:recordId?"PUT":"POST",data:edits}),dispatch.receiveEntityRecords(kind,name,updatedRecord,void 0,!0,edits)}}catch(_error){hasError=!0,error=_error}if(dispatch({type:"SAVE_ENTITY_RECORD_FINISH",kind:kind,name:name,recordId:recordId,error:error,isAutosave:isAutosave}),hasError&&throwOnError)throw error;return updatedRecord}finally{dispatch.__unstableReleaseStoreLock(lock)}}},__experimentalBatch=requests=>async _ref6=>{let{dispatch:dispatch}=_ref6;const batch=function createBatch(){let processor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultProcessor,lastId=0,queue=[];const pending=new ObservableSet;return{add(inputOrThunk){const id=++lastId;pending.add(id);const add=input=>new Promise(((resolve,reject)=>{queue.push({input:input,resolve:resolve,reject:reject}),pending.delete(id)}));return"function"==typeof inputOrThunk?Promise.resolve(inputOrThunk(add)).finally((()=>{pending.delete(id)})):add(inputOrThunk)},async run(){let results;pending.size&&await new Promise((resolve=>{const unsubscribe=pending.subscribe((()=>{pending.size||(unsubscribe(),resolve(void 0))}))}));try{if(results=await processor(queue.map((_ref=>{let{input:input}=_ref;return input}))),results.length!==queue.length)throw new Error("run: Array returned by processor must be same size as input array.")}catch(error){for(const{reject:reject}of queue)reject(error);throw error}let isSuccess=!0;return results.forEach(((result,key)=>{const queueItem=queue[key];var _result$output;null!=result&&result.error?(null==queueItem||queueItem.reject(result.error),isSuccess=!1):null==queueItem||queueItem.resolve(null!==(_result$output=null==result?void 0:result.output)&&void 0!==_result$output?_result$output:result)})),queue=[],isSuccess}}}(),api={saveEntityRecord:(kind,name,record,options)=>batch.add((add=>dispatch.saveEntityRecord(kind,name,record,{...options,__unstableFetch:add}))),saveEditedEntityRecord:(kind,name,recordId,options)=>batch.add((add=>dispatch.saveEditedEntityRecord(kind,name,recordId,{...options,__unstableFetch:add}))),deleteEntityRecord:(kind,name,recordId,query,options)=>batch.add((add=>dispatch.deleteEntityRecord(kind,name,recordId,query,{...options,__unstableFetch:add})))},resultPromises=requests.map((request=>request(api))),[,...results]=await Promise.all([batch.run(),...resultPromises]);return results},saveEditedEntityRecord=(kind,name,recordId,options)=>async _ref7=>{let{select:select,dispatch:dispatch}=_ref7;if(!select.hasEditsForEntityRecord(kind,name,recordId))return;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.kind===kind&&config.name===name));if(!entityConfig)return;const entityIdKey=entityConfig.key||DEFAULT_ENTITY_KEY,edits=select.getEntityRecordNonTransientEdits(kind,name,recordId),record={[entityIdKey]:recordId,...edits};return await dispatch.saveEntityRecord(kind,name,record,options)},__experimentalSaveSpecifiedEntityEdits=(kind,name,recordId,itemsToSave,options)=>async _ref8=>{let{select:select,dispatch:dispatch}=_ref8;if(!select.hasEditsForEntityRecord(kind,name,recordId))return;const edits=select.getEntityRecordNonTransientEdits(kind,name,recordId),editsToSave={};for(const edit in edits)itemsToSave.some((item=>item===edit))&&(editsToSave[edit]=edits[edit]);return await dispatch.saveEntityRecord(kind,name,editsToSave,options)};function receiveUploadPermissions(hasUploadPermissions){return(0,deprecated_build_module.Z)("wp.data.dispatch( 'core' ).receiveUploadPermissions",{since:"5.9",alternative:"receiveUserPermission"}),receiveUserPermission("create/media",hasUploadPermissions)}function receiveUserPermission(key,isAllowed){return{type:"RECEIVE_USER_PERMISSION",key:key,isAllowed:isAllowed}}function receiveAutosaves(postId,autosaves){return{type:"RECEIVE_AUTOSAVES",postId:postId,autosaves:Array.isArray(autosaves)?autosaves:[autosaves]}}function receiveNavigationFallbackId(fallbackId){return{type:"RECEIVE_NAVIGATION_FALLBACK_ID",fallbackId:fallbackId}}const DEFAULT_ENTITY_KEY="id",POST_RAW_ATTRIBUTES=["title","excerpt","content"],rootEntitiesConfig=[{label:(0,i18n_build_module.__)("Base"),kind:"root",name:"__unstableBase",baseURL:"/",baseURLParams:{_fields:["description","gmt_offset","home","name","site_icon","site_icon_url","site_logo","timezone_string","url"].join(",")}},{label:(0,i18n_build_module.__)("Site"),name:"site",kind:"root",baseURL:"/wp/v2/settings",getTitle:record=>{var _record$title;return null!==(_record$title=null==record?void 0:record.title)&&void 0!==_record$title?_record$title:(0,i18n_build_module.__)("Site Title")}},{label:(0,i18n_build_module.__)("Post Type"),name:"postType",kind:"root",key:"slug",baseURL:"/wp/v2/types",baseURLParams:{context:"edit"}},{name:"media",kind:"root",baseURL:"/wp/v2/media",baseURLParams:{context:"edit"},plural:"mediaItems",label:(0,i18n_build_module.__)("Media"),rawAttributes:["caption","title","description"]},{name:"taxonomy",kind:"root",key:"slug",baseURL:"/wp/v2/taxonomies",baseURLParams:{context:"edit"},plural:"taxonomies",label:(0,i18n_build_module.__)("Taxonomy")},{name:"sidebar",kind:"root",baseURL:"/wp/v2/sidebars",baseURLParams:{context:"edit"},plural:"sidebars",transientEdits:{blocks:!0},label:(0,i18n_build_module.__)("Widget areas")},{name:"widget",kind:"root",baseURL:"/wp/v2/widgets",baseURLParams:{context:"edit"},plural:"widgets",transientEdits:{blocks:!0},label:(0,i18n_build_module.__)("Widgets")},{name:"widgetType",kind:"root",baseURL:"/wp/v2/widget-types",baseURLParams:{context:"edit"},plural:"widgetTypes",label:(0,i18n_build_module.__)("Widget types")},{label:(0,i18n_build_module.__)("User"),name:"user",kind:"root",baseURL:"/wp/v2/users",baseURLParams:{context:"edit"},plural:"users"},{name:"comment",kind:"root",baseURL:"/wp/v2/comments",baseURLParams:{context:"edit"},plural:"comments",label:(0,i18n_build_module.__)("Comment")},{name:"menu",kind:"root",baseURL:"/wp/v2/menus",baseURLParams:{context:"edit"},plural:"menus",label:(0,i18n_build_module.__)("Menu")},{name:"menuItem",kind:"root",baseURL:"/wp/v2/menu-items",baseURLParams:{context:"edit"},plural:"menuItems",label:(0,i18n_build_module.__)("Menu Item"),rawAttributes:["title"]},{name:"menuLocation",kind:"root",baseURL:"/wp/v2/menu-locations",baseURLParams:{context:"edit"},plural:"menuLocations",label:(0,i18n_build_module.__)("Menu Location"),key:"name"},{label:(0,i18n_build_module.__)("Global Styles"),name:"globalStyles",kind:"root",baseURL:"/wp/v2/global-styles",baseURLParams:{context:"edit"},plural:"globalStylesVariations",getTitle:record=>{var _record$title2;return(null==record||null===(_record$title2=record.title)||void 0===_record$title2?void 0:_record$title2.rendered)||(null==record?void 0:record.title)}},{label:(0,i18n_build_module.__)("Themes"),name:"theme",kind:"root",baseURL:"/wp/v2/themes",baseURLParams:{context:"edit"},key:"stylesheet"},{label:(0,i18n_build_module.__)("Plugins"),name:"plugin",kind:"root",baseURL:"/wp/v2/plugins",baseURLParams:{context:"edit"},key:"plugin"}],additionalEntityConfigLoaders=[{kind:"postType",loadEntities:async function loadPostTypeEntities(){const postTypes=await(0,api_fetch_build_module.Z)({path:"/wp/v2/types?context=view"});return Object.entries(null!=postTypes?postTypes:{}).map((_ref=>{var _postType$rest_namesp;let[name,postType]=_ref;const isTemplate=["wp_template","wp_template_part"].includes(name);return{kind:"postType",baseURL:`/${null!==(_postType$rest_namesp=null==postType?void 0:postType.rest_namespace)&&void 0!==_postType$rest_namesp?_postType$rest_namesp:"wp/v2"}/${postType.rest_base}`,baseURLParams:{context:"edit"},name:name,label:postType.name,transientEdits:{blocks:!0,selection:!0},mergedEdits:{meta:!0},rawAttributes:POST_RAW_ATTRIBUTES,getTitle:record=>{var _record$title3,_record$slug;return(null==record||null===(_record$title3=record.title)||void 0===_record$title3?void 0:_record$title3.rendered)||(null==record?void 0:record.title)||(isTemplate?(0,dist_es2015.I)(null!==(_record$slug=record.slug)&&void 0!==_record$slug?_record$slug:""):String(record.id))},__unstablePrePersist:isTemplate?void 0:prePersistPostType,__unstable_rest_base:postType.rest_base}}))}},{kind:"taxonomy",loadEntities:async function loadTaxonomyEntities(){const taxonomies=await(0,api_fetch_build_module.Z)({path:"/wp/v2/taxonomies?context=view"});return Object.entries(null!=taxonomies?taxonomies:{}).map((_ref2=>{var _taxonomy$rest_namesp;let[name,taxonomy]=_ref2;return{kind:"taxonomy",baseURL:`/${null!==(_taxonomy$rest_namesp=null==taxonomy?void 0:taxonomy.rest_namespace)&&void 0!==_taxonomy$rest_namesp?_taxonomy$rest_namesp:"wp/v2"}/${taxonomy.rest_base}`,baseURLParams:{context:"edit"},name:name,label:taxonomy.name}}))}}],prePersistPostType=(persistedRecord,edits)=>{const newEdits={};return"auto-draft"===(null==persistedRecord?void 0:persistedRecord.status)&&(edits.status||newEdits.status||(newEdits.status="draft"),edits.title&&"Auto Draft"!==edits.title||newEdits.title||null!=persistedRecord&&persistedRecord.title&&"Auto Draft"!==(null==persistedRecord?void 0:persistedRecord.title)||(newEdits.title="")),newEdits};const getMethodName=function(kind,name){let prefix=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",usePlural=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const entityConfig=rootEntitiesConfig.find((config=>config.kind===kind&&config.name===name)),kindPrefix="root"===kind?"":(0,pascal_case_dist_es2015.Ho)(kind),nameSuffix=(0,pascal_case_dist_es2015.Ho)(name)+(usePlural?"s":""),suffix=usePlural&&"plural"in entityConfig&&null!=entityConfig&&entityConfig.plural?(0,pascal_case_dist_es2015.Ho)(entityConfig.plural):nameSuffix;return`${prefix}${kindPrefix}${suffix}`},getOrLoadEntitiesConfig=kind=>async _ref3=>{let{select:select,dispatch:dispatch}=_ref3,configs=select.getEntitiesConfig(kind);if(configs&&0!==configs.length)return configs;const loader=additionalEntityConfigLoaders.find((l=>l.kind===kind));return loader?(configs=await loader.loadEntities(),dispatch(addEntities(configs)),configs):[]};var get_normalized_comma_separable=function getNormalizedCommaSeparable(value){return"string"==typeof value?value.split(","):Array.isArray(value)?value:null};var get_query_parts=function withWeakMapCache(fn){const cache=new WeakMap;return key=>{let value;return cache.has(key)?value=cache.get(key):(value=fn(key),null!==key&&"object"==typeof key&&cache.set(key,value)),value}}((function getQueryParts(query){const parts={stableKey:"",page:1,perPage:10,fields:null,include:null,context:"default"},keys=Object.keys(query).sort();for(let i=0;i<keys.length;i++){const key=keys[i];let value=query[key];switch(key){case"page":parts[key]=Number(value);break;case"per_page":parts.perPage=Number(value);break;case"context":parts.context=value;break;default:var _getNormalizedCommaSe,_getNormalizedCommaSe2;if("_fields"===key)parts.fields=null!==(_getNormalizedCommaSe=get_normalized_comma_separable(value))&&void 0!==_getNormalizedCommaSe?_getNormalizedCommaSe:[],value=parts.fields.join();if("include"===key)"number"==typeof value&&(value=value.toString()),parts.include=(null!==(_getNormalizedCommaSe2=get_normalized_comma_separable(value))&&void 0!==_getNormalizedCommaSe2?_getNormalizedCommaSe2:[]).map(Number),value=parts.include.join();parts.stableKey+=(parts.stableKey?"&":"")+(0,add_query_args.f)("",{[key]:value}).slice(1)}}return parts}));function getContextFromAction(action){const{query:query}=action;if(!query)return"default";return get_query_parts(query).context}function getMergedItemIds(itemIds,nextItemIds,page,perPage){var _itemIds$length;if(1===page&&-1===perPage)return nextItemIds;const nextItemIdsStartIndex=(page-1)*perPage,size=Math.max(null!==(_itemIds$length=null==itemIds?void 0:itemIds.length)&&void 0!==_itemIds$length?_itemIds$length:0,nextItemIdsStartIndex+nextItemIds.length),mergedItemIds=new Array(size);for(let i=0;i<size;i++){const isInNextItemsRange=i>=nextItemIdsStartIndex&&i<nextItemIdsStartIndex+nextItemIds.length;mergedItemIds[i]=isInNextItemsRange?nextItemIds[i-nextItemIdsStartIndex]:null==itemIds?void 0:itemIds[i]}return mergedItemIds}function removeEntitiesById(entities,ids){return Object.fromEntries(Object.entries(entities).filter((_ref=>{let[id]=_ref;return!ids.some((itemId=>Number.isInteger(itemId)?itemId===+id:itemId===id))})))}const receiveQueries=(0,compose.Z)([if_matching_action((action=>"query"in action)),replace_action((action=>action.query?{...action,...get_query_parts(action.query)}:action)),on_sub_key("context"),on_sub_key("stableKey")])((function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;const{type:type,page:page,perPage:perPage,key:key=DEFAULT_ENTITY_KEY}=action;return"RECEIVE_ITEMS"!==type?state:getMergedItemIds(state||[],action.items.map((item=>item[key])),page,perPage)}));var reducer=(0,build_module.UY)({items:function items(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_ITEMS":{const context=getContextFromAction(action),key=action.key||DEFAULT_ENTITY_KEY;return{...state,[context]:{...state[context],...action.items.reduce(((accumulator,value)=>{var _state$context;const itemId=value[key];return accumulator[itemId]=conservativeMapItem(null==state||null===(_state$context=state[context])||void 0===_state$context?void 0:_state$context[itemId],value),accumulator}),{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(state).map((_ref2=>{let[itemId,contextState]=_ref2;return[itemId,removeEntitiesById(contextState,action.itemIds)]})))}return state},itemIsComplete:function itemIsComplete(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_ITEMS":{const context=getContextFromAction(action),{query:query,key:key=DEFAULT_ENTITY_KEY}=action,queryParts=query?get_query_parts(query):{},isCompleteQuery=!query||!Array.isArray(queryParts.fields);return{...state,[context]:{...state[context],...action.items.reduce(((result,item)=>{var _state$context2;const itemId=item[key];return result[itemId]=(null==state||null===(_state$context2=state[context])||void 0===_state$context2?void 0:_state$context2[itemId])||isCompleteQuery,result}),{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(state).map((_ref3=>{let[itemId,contextState]=_ref3;return[itemId,removeEntitiesById(contextState,action.itemIds)]})))}return state},queries:function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_ITEMS":return receiveQueries(state,action);case"REMOVE_ITEMS":const removedItems=action.itemIds.reduce(((result,itemId)=>(result[itemId]=!0,result)),{});return Object.fromEntries(Object.entries(state).map((_ref4=>{let[queryGroup,contextQueries]=_ref4;return[queryGroup,Object.fromEntries(Object.entries(contextQueries).map((_ref5=>{let[query,queryItems]=_ref5;return[query,queryItems.filter((queryId=>!removedItems[queryId]))]})))]})));default:return state}}});function entity(entityConfig){return(0,compose.Z)([if_matching_action((action=>action.name&&action.kind&&action.name===entityConfig.name&&action.kind===entityConfig.kind)),replace_action((action=>({...action,key:entityConfig.key||DEFAULT_ENTITY_KEY})))])((0,build_module.UY)({queriedData:reducer,edits:function(){var _action$query$context,_action$query;let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_ITEMS":if("default"!==(null!==(_action$query$context=null==action||null===(_action$query=action.query)||void 0===_action$query?void 0:_action$query.context)&&void 0!==_action$query$context?_action$query$context:"default"))return state;const nextState={...state};for(const record of action.items){const recordId=record[action.key],edits=nextState[recordId];if(!edits)continue;const nextEdits=Object.keys(edits).reduce(((acc,key)=>{var _record$key$raw,_record$key;return es6_default()(edits[key],null!==(_record$key$raw=null===(_record$key=record[key])||void 0===_record$key?void 0:_record$key.raw)&&void 0!==_record$key$raw?_record$key$raw:record[key])||action.persistedEdits&&es6_default()(edits[key],action.persistedEdits[key])||(acc[key]=edits[key]),acc}),{});Object.keys(nextEdits).length?nextState[recordId]=nextEdits:delete nextState[recordId]}return nextState;case"EDIT_ENTITY_RECORD":const nextEdits={...state[action.recordId],...action.edits};return Object.keys(nextEdits).forEach((key=>{void 0===nextEdits[key]&&delete nextEdits[key]})),{...state,[action.recordId]:nextEdits}}return state},saving:function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"SAVE_ENTITY_RECORD_START":case"SAVE_ENTITY_RECORD_FINISH":return{...state,[action.recordId]:{pending:"SAVE_ENTITY_RECORD_START"===action.type,error:action.error,isAutosave:action.isAutosave}}}return state},deleting:function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"DELETE_ENTITY_RECORD_START":case"DELETE_ENTITY_RECORD_FINISH":return{...state,[action.recordId]:{pending:"DELETE_ENTITY_RECORD_START"===action.type,error:action.error}}}return state}}))}function entitiesConfig(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rootEntitiesConfig,action=arguments.length>1?arguments[1]:void 0;return"ADD_ENTITIES"===action.type?[...state,...action.entities]:state}const UNDO_INITIAL_STATE=Object.assign([],{offset:0});let lastEditAction;var build_module_reducer=(0,build_module.UY)({terms:function terms(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_TERMS"===action.type?{...state,[action.taxonomy]:action.terms}:state},users:function users(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},queries:{}},action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_USER_QUERY"===action.type?{byId:{...state.byId,...action.users.reduce(((newUsers,user)=>({...newUsers,[user.id]:user})),{})},queries:{...state.queries,[action.queryID]:action.users.map((user=>user.id))}}:state},currentTheme:function currentTheme(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_CURRENT_THEME"===action.type?action.currentTheme.stylesheet:state},currentGlobalStylesId:function currentGlobalStylesId(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_CURRENT_GLOBAL_STYLES_ID"===action.type?action.id:state},currentUser:function currentUser(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_CURRENT_USER"===action.type?action.currentUser:state},themeGlobalStyleVariations:function themeGlobalStyleVariations(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS"===action.type?{...state,[action.stylesheet]:action.variations}:state},themeBaseGlobalStyles:function themeBaseGlobalStyles(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_THEME_GLOBAL_STYLES"===action.type?{...state,[action.stylesheet]:action.globalStyles}:state},themeGlobalStyleRevisions:function themeGlobalStyleRevisions(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS"===action.type?{...state,[action.currentId]:action.revisions}:state},taxonomies:function taxonomies(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_TAXONOMIES"===action.type?action.taxonomies:state},entities:function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;const newConfig=entitiesConfig(state.config,action);let entitiesDataReducer=state.reducer;if(!entitiesDataReducer||newConfig!==state.config){const entitiesByKind=newConfig.reduce(((acc,record)=>{const{kind:kind}=record;return acc[kind]||(acc[kind]=[]),acc[kind].push(record),acc}),{});entitiesDataReducer=(0,build_module.UY)(Object.entries(entitiesByKind).reduce(((memo,_ref)=>{let[kind,subEntities]=_ref;const kindReducer=(0,build_module.UY)(subEntities.reduce(((kindMemo,entityConfig)=>({...kindMemo,[entityConfig.name]:entity(entityConfig)})),{}));return memo[kind]=kindReducer,memo}),{}))}const newData=entitiesDataReducer(state.records,action);return newData===state.records&&newConfig===state.config&&entitiesDataReducer===state.reducer?state:{reducer:entitiesDataReducer,records:newData,config:newConfig}},undo:function reducer_undo(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UNDO_INITIAL_STATE,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"EDIT_ENTITY_RECORD":case"CREATE_UNDO_LEVEL":let isCreateUndoLevel="CREATE_UNDO_LEVEL"===action.type;const isUndoOrRedo=!isCreateUndoLevel&&(action.meta.isUndo||action.meta.isRedo);let nextState;if(isCreateUndoLevel?action=lastEditAction:isUndoOrRedo||(lastEditAction=Object.keys(action.edits).some((key=>!action.transientEdits[key]))?action:{...action,edits:{...lastEditAction&&lastEditAction.edits,...action.edits}}),isUndoOrRedo){if(nextState=[...state],nextState.offset=state.offset+(action.meta.isUndo?-1:1),!state.flattenedUndo)return nextState;isCreateUndoLevel=!0,lastEditAction.meta.undo||(lastEditAction.meta.undo={edits:{}}),action=lastEditAction}if(!action.meta.undo)return state;if(!isCreateUndoLevel&&!Object.keys(action.edits).some((key=>!action.transientEdits[key])))return nextState=[...state],nextState.flattenedUndo={...state.flattenedUndo,...action.edits},nextState.offset=state.offset,nextState;nextState=nextState||state.slice(0,state.offset||void 0),nextState.offset=nextState.offset||0,nextState.pop(),isCreateUndoLevel||nextState.push({kind:action.meta.undo.kind,name:action.meta.undo.name,recordId:action.meta.undo.recordId,edits:{...state.flattenedUndo,...action.meta.undo.edits}});const comparisonUndoEdits=Object.values(action.meta.undo.edits).filter((edit=>"function"!=typeof edit)),comparisonEdits=Object.values(action.edits).filter((edit=>"function"!=typeof edit));return(0,is_shallow_equal_build_module.ZP)(comparisonUndoEdits,comparisonEdits)||nextState.push({kind:action.kind,name:action.name,recordId:action.recordId,edits:isCreateUndoLevel?{...state.flattenedUndo,...action.edits}:action.edits}),nextState}return state},embedPreviews:function embedPreviews(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;if("RECEIVE_EMBED_PREVIEW"===action.type){const{url:url,preview:preview}=action;return{...state,[url]:preview}}return state},userPermissions:function userPermissions(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_USER_PERMISSION"===action.type?{...state,[action.key]:action.isAllowed}:state},autosaves:function autosaves(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;if("RECEIVE_AUTOSAVES"===action.type){const{postId:postId,autosaves:autosavesData}=action;return{...state,[postId]:autosavesData}}return state},blockPatterns:function blockPatterns(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_BLOCK_PATTERNS"===action.type?action.patterns:state},blockPatternCategories:function blockPatternCategories(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_BLOCK_PATTERN_CATEGORIES"===action.type?action.categories:state},navigationFallbackId:function navigationFallbackId(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;return"RECEIVE_NAVIGATION_FALLBACK_ID"===action.type?action.fallbackId:state}}),rememo=__webpack_require__("./node_modules/rememo/rememo.js"),factory=__webpack_require__("./packages/data/build-module/factory.js"),equivalent_key_map=__webpack_require__("./node_modules/equivalent-key-map/equivalent-key-map.js"),equivalent_key_map_default=__webpack_require__.n(equivalent_key_map);function setNestedValue(object,path,value){return object&&"object"==typeof object?(path.reduce(((acc,key,idx)=>(void 0===acc[key]&&(Number.isInteger(path[idx+1])?acc[key]=[]:acc[key]={}),idx===path.length-1&&(acc[key]=value),acc[key])),object),object):object}const queriedItemsCacheByState=new WeakMap;function getQueriedItemsUncached(state,query){var _state$queries,_state$queries$contex;const{stableKey:stableKey,page:page,perPage:perPage,include:include,fields:fields,context:context}=get_query_parts(query);let itemIds;if(null!==(_state$queries=state.queries)&&void 0!==_state$queries&&null!==(_state$queries$contex=_state$queries[context])&&void 0!==_state$queries$contex&&_state$queries$contex[stableKey]&&(itemIds=state.queries[context][stableKey]),!itemIds)return null;const startOffset=-1===perPage?0:(page-1)*perPage,endOffset=-1===perPage?itemIds.length:Math.min(startOffset+perPage,itemIds.length),items=[];for(let i=startOffset;i<endOffset;i++){var _state$items$context;const itemId=itemIds[i];if(Array.isArray(include)&&!include.includes(itemId))continue;if(null===(_state$items$context=state.items[context])||void 0===_state$items$context||!_state$items$context.hasOwnProperty(itemId))return null;const item=state.items[context][itemId];let filteredItem;if(Array.isArray(fields)){filteredItem={};for(let f=0;f<fields.length;f++){const field=fields[f].split(".");let value=item;field.forEach((fieldName=>{value=value[fieldName]})),setNestedValue(filteredItem,field,value)}}else{var _state$itemIsComplete;if(null===(_state$itemIsComplete=state.itemIsComplete[context])||void 0===_state$itemIsComplete||!_state$itemIsComplete[itemId])return null;filteredItem=item}items.push(filteredItem)}return items}const getQueriedItems=(0,rememo.Z)((function(state){let query=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},queriedItemsCache=queriedItemsCacheByState.get(state);if(queriedItemsCache){const queriedItems=queriedItemsCache.get(query);if(void 0!==queriedItems)return queriedItems}else queriedItemsCache=new(equivalent_key_map_default()),queriedItemsCacheByState.set(state,queriedItemsCache);const items=getQueriedItemsUncached(state,query);return queriedItemsCache.set(query,items),items}));const EMPTY_OBJECT={},isRequestingEmbedPreview=(0,factory.M)((select=>(state,url)=>select("core").isResolving("getEmbedPreview",[url])));function getAuthors(state,query){(0,deprecated_build_module.Z)("select( 'core' ).getAuthors()",{since:"5.9",alternative:"select( 'core' ).getUsers({ who: 'authors' })"});const path=(0,add_query_args.f)("/wp/v2/users/?who=authors&per_page=100",query);return getUserQueryResults(state,path)}function getCurrentUser(state){return state.currentUser}const getUserQueryResults=(0,rememo.Z)(((state,queryID)=>{var _state$users$queries$;return(null!==(_state$users$queries$=state.users.queries[queryID])&&void 0!==_state$users$queries$?_state$users$queries$:[]).map((id=>state.users.byId[id]))}),((state,queryID)=>[state.users.queries[queryID],state.users.byId]));function getEntitiesByKind(state,kind){return(0,deprecated_build_module.Z)("wp.data.select( 'core' ).getEntitiesByKind()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntitiesConfig()"}),getEntitiesConfig(state,kind)}function getEntitiesConfig(state,kind){return state.entities.config.filter((entity=>entity.kind===kind))}function getEntity(state,kind,name){return(0,deprecated_build_module.Z)("wp.data.select( 'core' ).getEntity()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntityConfig()"}),getEntityConfig(state,kind,name)}function getEntityConfig(state,kind,name){var _state$entities$confi;return null===(_state$entities$confi=state.entities.config)||void 0===_state$entities$confi?void 0:_state$entities$confi.find((config=>config.kind===kind&&config.name===name))}const getEntityRecord=(0,rememo.Z)(((state,kind,name,key,query)=>{var _state$entities$recor,_state$entities$recor2,_state$entities$recor3,_query$context,_queriedState$items$c;const queriedState=null===(_state$entities$recor=state.entities.records)||void 0===_state$entities$recor||null===(_state$entities$recor2=_state$entities$recor[kind])||void 0===_state$entities$recor2||null===(_state$entities$recor3=_state$entities$recor2[name])||void 0===_state$entities$recor3?void 0:_state$entities$recor3.queriedData;if(!queriedState)return;const context=null!==(_query$context=null==query?void 0:query.context)&&void 0!==_query$context?_query$context:"default";if(void 0===query){var _queriedState$itemIsC;if(null===(_queriedState$itemIsC=queriedState.itemIsComplete[context])||void 0===_queriedState$itemIsC||!_queriedState$itemIsC[key])return;return queriedState.items[context][key]}const item=null===(_queriedState$items$c=queriedState.items[context])||void 0===_queriedState$items$c?void 0:_queriedState$items$c[key];if(item&&query._fields){var _getNormalizedCommaSe;const filteredItem={},fields=null!==(_getNormalizedCommaSe=get_normalized_comma_separable(query._fields))&&void 0!==_getNormalizedCommaSe?_getNormalizedCommaSe:[];for(let f=0;f<fields.length;f++){const field=fields[f].split(".");let value=item;field.forEach((fieldName=>{value=value[fieldName]})),setNestedValue(filteredItem,field,value)}return filteredItem}return item}),((state,kind,name,recordId,query)=>{var _query$context2,_state$entities$recor4,_state$entities$recor5,_state$entities$recor6,_state$entities$recor7,_state$entities$recor8,_state$entities$recor9,_state$entities$recor10,_state$entities$recor11,_state$entities$recor12,_state$entities$recor13;const context=null!==(_query$context2=null==query?void 0:query.context)&&void 0!==_query$context2?_query$context2:"default";return[null===(_state$entities$recor4=state.entities.records)||void 0===_state$entities$recor4||null===(_state$entities$recor5=_state$entities$recor4[kind])||void 0===_state$entities$recor5||null===(_state$entities$recor6=_state$entities$recor5[name])||void 0===_state$entities$recor6||null===(_state$entities$recor7=_state$entities$recor6.queriedData)||void 0===_state$entities$recor7||null===(_state$entities$recor8=_state$entities$recor7.items[context])||void 0===_state$entities$recor8?void 0:_state$entities$recor8[recordId],null===(_state$entities$recor9=state.entities.records)||void 0===_state$entities$recor9||null===(_state$entities$recor10=_state$entities$recor9[kind])||void 0===_state$entities$recor10||null===(_state$entities$recor11=_state$entities$recor10[name])||void 0===_state$entities$recor11||null===(_state$entities$recor12=_state$entities$recor11.queriedData)||void 0===_state$entities$recor12||null===(_state$entities$recor13=_state$entities$recor12.itemIsComplete[context])||void 0===_state$entities$recor13?void 0:_state$entities$recor13[recordId]]}));function __experimentalGetEntityRecordNoResolver(state,kind,name,key){return getEntityRecord(state,kind,name,key)}const getRawEntityRecord=(0,rememo.Z)(((state,kind,name,key)=>{const record=getEntityRecord(state,kind,name,key);return record&&Object.keys(record).reduce(((accumulator,_key)=>{var _record$_key$raw,_record$_key;(function isRawAttribute(entity,attribute){return(entity.rawAttributes||[]).includes(attribute)})(getEntityConfig(state,kind,name),_key)?accumulator[_key]=null!==(_record$_key$raw=null===(_record$_key=record[_key])||void 0===_record$_key?void 0:_record$_key.raw)&&void 0!==_record$_key$raw?_record$_key$raw:record[_key]:accumulator[_key]=record[_key];return accumulator}),{})}),((state,kind,name,recordId,query)=>{var _query$context3,_state$entities$recor14,_state$entities$recor15,_state$entities$recor16,_state$entities$recor17,_state$entities$recor18,_state$entities$recor19,_state$entities$recor20,_state$entities$recor21,_state$entities$recor22,_state$entities$recor23;const context=null!==(_query$context3=null==query?void 0:query.context)&&void 0!==_query$context3?_query$context3:"default";return[state.entities.config,null===(_state$entities$recor14=state.entities.records)||void 0===_state$entities$recor14||null===(_state$entities$recor15=_state$entities$recor14[kind])||void 0===_state$entities$recor15||null===(_state$entities$recor16=_state$entities$recor15[name])||void 0===_state$entities$recor16||null===(_state$entities$recor17=_state$entities$recor16.queriedData)||void 0===_state$entities$recor17||null===(_state$entities$recor18=_state$entities$recor17.items[context])||void 0===_state$entities$recor18?void 0:_state$entities$recor18[recordId],null===(_state$entities$recor19=state.entities.records)||void 0===_state$entities$recor19||null===(_state$entities$recor20=_state$entities$recor19[kind])||void 0===_state$entities$recor20||null===(_state$entities$recor21=_state$entities$recor20[name])||void 0===_state$entities$recor21||null===(_state$entities$recor22=_state$entities$recor21.queriedData)||void 0===_state$entities$recor22||null===(_state$entities$recor23=_state$entities$recor22.itemIsComplete[context])||void 0===_state$entities$recor23?void 0:_state$entities$recor23[recordId]]}));function hasEntityRecords(state,kind,name,query){return Array.isArray(getEntityRecords(state,kind,name,query))}const getEntityRecords=(state,kind,name,query)=>{var _state$entities$recor24,_state$entities$recor25,_state$entities$recor26;const queriedState=null===(_state$entities$recor24=state.entities.records)||void 0===_state$entities$recor24||null===(_state$entities$recor25=_state$entities$recor24[kind])||void 0===_state$entities$recor25||null===(_state$entities$recor26=_state$entities$recor25[name])||void 0===_state$entities$recor26?void 0:_state$entities$recor26.queriedData;return queriedState?getQueriedItems(queriedState,query):null},__experimentalGetDirtyEntityRecords=(0,rememo.Z)((state=>{const{entities:{records:records}}=state,dirtyRecords=[];return Object.keys(records).forEach((kind=>{Object.keys(records[kind]).forEach((name=>{const primaryKeys=Object.keys(records[kind][name].edits).filter((primaryKey=>getEntityRecord(state,kind,name,primaryKey)&&hasEditsForEntityRecord(state,kind,name,primaryKey)));if(primaryKeys.length){const entityConfig=getEntityConfig(state,kind,name);primaryKeys.forEach((primaryKey=>{var _entityConfig$getTitl;const entityRecord=getEditedEntityRecord(state,kind,name,primaryKey);dirtyRecords.push({key:entityRecord?entityRecord[entityConfig.key||DEFAULT_ENTITY_KEY]:void 0,title:(null==entityConfig||null===(_entityConfig$getTitl=entityConfig.getTitle)||void 0===_entityConfig$getTitl?void 0:_entityConfig$getTitl.call(entityConfig,entityRecord))||"",name:name,kind:kind})}))}}))})),dirtyRecords}),(state=>[state.entities.records])),__experimentalGetEntitiesBeingSaved=(0,rememo.Z)((state=>{const{entities:{records:records}}=state,recordsBeingSaved=[];return Object.keys(records).forEach((kind=>{Object.keys(records[kind]).forEach((name=>{const primaryKeys=Object.keys(records[kind][name].saving).filter((primaryKey=>isSavingEntityRecord(state,kind,name,primaryKey)));if(primaryKeys.length){const entityConfig=getEntityConfig(state,kind,name);primaryKeys.forEach((primaryKey=>{var _entityConfig$getTitl2;const entityRecord=getEditedEntityRecord(state,kind,name,primaryKey);recordsBeingSaved.push({key:entityRecord?entityRecord[entityConfig.key||DEFAULT_ENTITY_KEY]:void 0,title:(null==entityConfig||null===(_entityConfig$getTitl2=entityConfig.getTitle)||void 0===_entityConfig$getTitl2?void 0:_entityConfig$getTitl2.call(entityConfig,entityRecord))||"",name:name,kind:kind})}))}}))})),recordsBeingSaved}),(state=>[state.entities.records]));function getEntityRecordEdits(state,kind,name,recordId){var _state$entities$recor27,_state$entities$recor28,_state$entities$recor29,_state$entities$recor30;return null===(_state$entities$recor27=state.entities.records)||void 0===_state$entities$recor27||null===(_state$entities$recor28=_state$entities$recor27[kind])||void 0===_state$entities$recor28||null===(_state$entities$recor29=_state$entities$recor28[name])||void 0===_state$entities$recor29||null===(_state$entities$recor30=_state$entities$recor29.edits)||void 0===_state$entities$recor30?void 0:_state$entities$recor30[recordId]}const getEntityRecordNonTransientEdits=(0,rememo.Z)(((state,kind,name,recordId)=>{const{transientEdits:transientEdits}=getEntityConfig(state,kind,name)||{},edits=getEntityRecordEdits(state,kind,name,recordId)||{};return transientEdits?Object.keys(edits).reduce(((acc,key)=>(transientEdits[key]||(acc[key]=edits[key]),acc)),{}):edits}),((state,kind,name,recordId)=>{var _state$entities$recor31,_state$entities$recor32,_state$entities$recor33,_state$entities$recor34;return[state.entities.config,null===(_state$entities$recor31=state.entities.records)||void 0===_state$entities$recor31||null===(_state$entities$recor32=_state$entities$recor31[kind])||void 0===_state$entities$recor32||null===(_state$entities$recor33=_state$entities$recor32[name])||void 0===_state$entities$recor33||null===(_state$entities$recor34=_state$entities$recor33.edits)||void 0===_state$entities$recor34?void 0:_state$entities$recor34[recordId]]}));function hasEditsForEntityRecord(state,kind,name,recordId){return isSavingEntityRecord(state,kind,name,recordId)||Object.keys(getEntityRecordNonTransientEdits(state,kind,name,recordId)).length>0}const getEditedEntityRecord=(0,rememo.Z)(((state,kind,name,recordId)=>({...getRawEntityRecord(state,kind,name,recordId),...getEntityRecordEdits(state,kind,name,recordId)})),((state,kind,name,recordId,query)=>{var _query$context4,_state$entities$recor35,_state$entities$recor36,_state$entities$recor37,_state$entities$recor38,_state$entities$recor39,_state$entities$recor40,_state$entities$recor41,_state$entities$recor42,_state$entities$recor43,_state$entities$recor44,_state$entities$recor45,_state$entities$recor46;const context=null!==(_query$context4=null==query?void 0:query.context)&&void 0!==_query$context4?_query$context4:"default";return[state.entities.config,null===(_state$entities$recor35=state.entities.records)||void 0===_state$entities$recor35||null===(_state$entities$recor36=_state$entities$recor35[kind])||void 0===_state$entities$recor36||null===(_state$entities$recor37=_state$entities$recor36[name])||void 0===_state$entities$recor37||null===(_state$entities$recor38=_state$entities$recor37.queriedData.items[context])||void 0===_state$entities$recor38?void 0:_state$entities$recor38[recordId],null===(_state$entities$recor39=state.entities.records)||void 0===_state$entities$recor39||null===(_state$entities$recor40=_state$entities$recor39[kind])||void 0===_state$entities$recor40||null===(_state$entities$recor41=_state$entities$recor40[name])||void 0===_state$entities$recor41||null===(_state$entities$recor42=_state$entities$recor41.queriedData.itemIsComplete[context])||void 0===_state$entities$recor42?void 0:_state$entities$recor42[recordId],null===(_state$entities$recor43=state.entities.records)||void 0===_state$entities$recor43||null===(_state$entities$recor44=_state$entities$recor43[kind])||void 0===_state$entities$recor44||null===(_state$entities$recor45=_state$entities$recor44[name])||void 0===_state$entities$recor45||null===(_state$entities$recor46=_state$entities$recor45.edits)||void 0===_state$entities$recor46?void 0:_state$entities$recor46[recordId]]}));function isAutosavingEntityRecord(state,kind,name,recordId){var _state$entities$recor47,_state$entities$recor48,_state$entities$recor49,_state$entities$recor50,_state$entities$recor51;const{pending:pending,isAutosave:isAutosave}=null!==(_state$entities$recor47=null===(_state$entities$recor48=state.entities.records)||void 0===_state$entities$recor48||null===(_state$entities$recor49=_state$entities$recor48[kind])||void 0===_state$entities$recor49||null===(_state$entities$recor50=_state$entities$recor49[name])||void 0===_state$entities$recor50||null===(_state$entities$recor51=_state$entities$recor50.saving)||void 0===_state$entities$recor51?void 0:_state$entities$recor51[recordId])&&void 0!==_state$entities$recor47?_state$entities$recor47:{};return Boolean(pending&&isAutosave)}function isSavingEntityRecord(state,kind,name,recordId){var _state$entities$recor52,_state$entities$recor53,_state$entities$recor54,_state$entities$recor55,_state$entities$recor56,_state$entities$recor57;return null!==(_state$entities$recor52=null===(_state$entities$recor53=state.entities.records)||void 0===_state$entities$recor53||null===(_state$entities$recor54=_state$entities$recor53[kind])||void 0===_state$entities$recor54||null===(_state$entities$recor55=_state$entities$recor54[name])||void 0===_state$entities$recor55||null===(_state$entities$recor56=_state$entities$recor55.saving)||void 0===_state$entities$recor56||null===(_state$entities$recor57=_state$entities$recor56[recordId])||void 0===_state$entities$recor57?void 0:_state$entities$recor57.pending)&&void 0!==_state$entities$recor52&&_state$entities$recor52}function isDeletingEntityRecord(state,kind,name,recordId){var _state$entities$recor58,_state$entities$recor59,_state$entities$recor60,_state$entities$recor61,_state$entities$recor62,_state$entities$recor63;return null!==(_state$entities$recor58=null===(_state$entities$recor59=state.entities.records)||void 0===_state$entities$recor59||null===(_state$entities$recor60=_state$entities$recor59[kind])||void 0===_state$entities$recor60||null===(_state$entities$recor61=_state$entities$recor60[name])||void 0===_state$entities$recor61||null===(_state$entities$recor62=_state$entities$recor61.deleting)||void 0===_state$entities$recor62||null===(_state$entities$recor63=_state$entities$recor62[recordId])||void 0===_state$entities$recor63?void 0:_state$entities$recor63.pending)&&void 0!==_state$entities$recor58&&_state$entities$recor58}function getLastEntitySaveError(state,kind,name,recordId){var _state$entities$recor64,_state$entities$recor65,_state$entities$recor66,_state$entities$recor67,_state$entities$recor68;return null===(_state$entities$recor64=state.entities.records)||void 0===_state$entities$recor64||null===(_state$entities$recor65=_state$entities$recor64[kind])||void 0===_state$entities$recor65||null===(_state$entities$recor66=_state$entities$recor65[name])||void 0===_state$entities$recor66||null===(_state$entities$recor67=_state$entities$recor66.saving)||void 0===_state$entities$recor67||null===(_state$entities$recor68=_state$entities$recor67[recordId])||void 0===_state$entities$recor68?void 0:_state$entities$recor68.error}function getLastEntityDeleteError(state,kind,name,recordId){var _state$entities$recor69,_state$entities$recor70,_state$entities$recor71,_state$entities$recor72,_state$entities$recor73;return null===(_state$entities$recor69=state.entities.records)||void 0===_state$entities$recor69||null===(_state$entities$recor70=_state$entities$recor69[kind])||void 0===_state$entities$recor70||null===(_state$entities$recor71=_state$entities$recor70[name])||void 0===_state$entities$recor71||null===(_state$entities$recor72=_state$entities$recor71.deleting)||void 0===_state$entities$recor72||null===(_state$entities$recor73=_state$entities$recor72[recordId])||void 0===_state$entities$recor73?void 0:_state$entities$recor73.error}function getCurrentUndoOffset(state){return state.undo.offset}function getUndoEdit(state){return state.undo[state.undo.length-2+getCurrentUndoOffset(state)]}function getRedoEdit(state){return state.undo[state.undo.length+getCurrentUndoOffset(state)]}function hasUndo(state){return Boolean(getUndoEdit(state))}function hasRedo(state){return Boolean(getRedoEdit(state))}function getCurrentTheme(state){return getEntityRecord(state,"root","theme",state.currentTheme)}function __experimentalGetCurrentGlobalStylesId(state){return state.currentGlobalStylesId}function getThemeSupports(state){var _getCurrentTheme$them,_getCurrentTheme;return null!==(_getCurrentTheme$them=null===(_getCurrentTheme=getCurrentTheme(state))||void 0===_getCurrentTheme?void 0:_getCurrentTheme.theme_supports)&&void 0!==_getCurrentTheme$them?_getCurrentTheme$them:EMPTY_OBJECT}function getEmbedPreview(state,url){return state.embedPreviews[url]}function isPreviewEmbedFallback(state,url){const preview=state.embedPreviews[url],oEmbedLinkCheck='<a href="'+url+'">'+url+"</a>";return!!preview&&preview.html===oEmbedLinkCheck}function canUser(state,action,resource,id){const key=[action,resource,id].filter(Boolean).join("/");return state.userPermissions[key]}function canUserEditEntityRecord(state,kind,name,recordId){const entityConfig=getEntityConfig(state,kind,name);if(!entityConfig)return!1;return canUser(state,"update",entityConfig.__unstable_rest_base,recordId)}function getAutosaves(state,postType,postId){return state.autosaves[postId]}function getAutosave(state,postType,postId,authorId){if(void 0===authorId)return;const autosaves=state.autosaves[postId];return null==autosaves?void 0:autosaves.find((autosave=>autosave.author===authorId))}const hasFetchedAutosaves=(0,factory.M)((select=>(state,postType,postId)=>select("core").hasFinishedResolution("getAutosaves",[postType,postId]))),getReferenceByDistinctEdits=(0,rememo.Z)((state=>[]),(state=>[state.undo.length,state.undo.offset,state.undo.flattenedUndo]));function __experimentalGetTemplateForLink(state,link){const records=getEntityRecords(state,"postType","wp_template",{"find-template":link});return null!=records&&records.length?getEditedEntityRecord(state,"postType","wp_template",records[0].id):null}function __experimentalGetCurrentThemeBaseGlobalStyles(state){const currentTheme=getCurrentTheme(state);return currentTheme?state.themeBaseGlobalStyles[currentTheme.stylesheet]:null}function __experimentalGetCurrentThemeGlobalStylesVariations(state){const currentTheme=getCurrentTheme(state);return currentTheme?state.themeGlobalStyleVariations[currentTheme.stylesheet]:null}function getBlockPatterns(state){return state.blockPatterns}function getBlockPatternCategories(state){return state.blockPatternCategories}function getNavigationFallbackId(state){return state.navigationFallbackId}function getCurrentThemeGlobalStylesRevisions(state){const currentGlobalStylesId=__experimentalGetCurrentGlobalStylesId(state);return currentGlobalStylesId?state.themeGlobalStyleRevisions[currentGlobalStylesId]:null}var camel_case_dist_es2015=__webpack_require__("./node_modules/camel-case/dist.es2015/index.js");var forward_resolver=resolverName=>function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return async _ref=>{let{resolveSelect:resolveSelect}=_ref;await resolveSelect[resolverName](...args)}};const resolvers_getAuthors=query=>async _ref=>{let{dispatch:dispatch}=_ref;const path=(0,add_query_args.f)("/wp/v2/users/?who=authors&per_page=100",query),users=await(0,api_fetch_build_module.Z)({path:path});dispatch.receiveUserQuery(path,users)},resolvers_getCurrentUser=()=>async _ref2=>{let{dispatch:dispatch}=_ref2;const currentUser=await(0,api_fetch_build_module.Z)({path:"/wp/v2/users/me"});dispatch.receiveCurrentUser(currentUser)},resolvers_getEntityRecord=function(kind,name){let key=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",query=arguments.length>3?arguments[3]:void 0;return async _ref3=>{let{select:select,dispatch:dispatch}=_ref3;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig||null!=entityConfig&&entityConfig.__experimentalNoFetch)return;const lock=await dispatch.__unstableAcquireStoreLock("core",["entities","records",kind,name,key],{exclusive:!1});try{void 0!==query&&query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.key||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.f)(entityConfig.baseURL+(key?"/"+key:""),{...entityConfig.baseURLParams,...query});if(void 0!==query){query={...query,include:[key]};if(select.hasEntityRecords(kind,name,query))return}const record=await(0,api_fetch_build_module.Z)({path:path});dispatch.receiveEntityRecords(kind,name,record,query)}finally{dispatch.__unstableReleaseStoreLock(lock)}}},resolvers_getRawEntityRecord=forward_resolver("getEntityRecord"),resolvers_getEditedEntityRecord=forward_resolver("getEntityRecord"),resolvers_getEntityRecords=function(kind,name){let query=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async _ref4=>{let{dispatch:dispatch}=_ref4;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig||null!=entityConfig&&entityConfig.__experimentalNoFetch)return;const lock=await dispatch.__unstableAcquireStoreLock("core",["entities","records",kind,name],{exclusive:!1});try{var _query;query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.key||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.f)(entityConfig.baseURL,{...entityConfig.baseURLParams,...query});let records=Object.values(await(0,api_fetch_build_module.Z)({path:path}));if(query._fields&&(records=records.map((record=>(query._fields.split(",").forEach((field=>{record.hasOwnProperty(field)||(record[field]=void 0)})),record)))),dispatch.receiveEntityRecords(kind,name,records,query),!(null!==(_query=query)&&void 0!==_query&&_query._fields||query.context)){const key=entityConfig.key||DEFAULT_ENTITY_KEY,resolutionsArgs=records.filter((record=>record[key])).map((record=>[kind,name,record[key]]));dispatch({type:"START_RESOLUTIONS",selectorName:"getEntityRecord",args:resolutionsArgs}),dispatch({type:"FINISH_RESOLUTIONS",selectorName:"getEntityRecord",args:resolutionsArgs})}}finally{dispatch.__unstableReleaseStoreLock(lock)}}};resolvers_getEntityRecords.shouldInvalidate=(action,kind,name)=>("RECEIVE_ITEMS"===action.type||"REMOVE_ITEMS"===action.type)&&action.invalidateCache&&kind===action.kind&&name===action.name;const resolvers_getCurrentTheme=()=>async _ref5=>{let{dispatch:dispatch,resolveSelect:resolveSelect}=_ref5;const activeThemes=await resolveSelect.getEntityRecords("root","theme",{status:"active"});dispatch.receiveCurrentTheme(activeThemes[0])},resolvers_getThemeSupports=forward_resolver("getCurrentTheme"),resolvers_getEmbedPreview=url=>async _ref6=>{let{dispatch:dispatch}=_ref6;try{const embedProxyResponse=await(0,api_fetch_build_module.Z)({path:(0,add_query_args.f)("/oembed/1.0/proxy",{url:url})});dispatch.receiveEmbedPreview(url,embedProxyResponse)}catch(error){dispatch.receiveEmbedPreview(url,!1)}},resolvers_canUser=(requestedAction,resource,id)=>async _ref7=>{var _response$headers;let{dispatch:dispatch,registry:registry}=_ref7;const{hasStartedResolution:hasStartedResolution}=registry.select("core"),resourcePath=id?`${resource}/${id}`:resource,retrievedActions=["create","read","update","delete"];if(!retrievedActions.includes(requestedAction))throw new Error(`'${requestedAction}' is not a valid action.`);for(const relatedAction of retrievedActions){if(relatedAction===requestedAction)continue;if(hasStartedResolution("canUser",[relatedAction,resource,id]))return}let response;try{response=await(0,api_fetch_build_module.Z)({path:`/wp/v2/${resourcePath}`,method:"OPTIONS",parse:!1})}catch(error){return}const allowHeader=null===(_response$headers=response.headers)||void 0===_response$headers?void 0:_response$headers.get("allow"),allowedMethods=(null==allowHeader?void 0:allowHeader.allow)||allowHeader||"",permissions={},methods={create:"POST",read:"GET",update:"PUT",delete:"DELETE"};for(const[actionName,methodName]of Object.entries(methods))permissions[actionName]=allowedMethods.includes(methodName);for(const action of retrievedActions)dispatch.receiveUserPermission(`${action}/${resourcePath}`,permissions[action])},resolvers_canUserEditEntityRecord=(kind,name,recordId)=>async _ref8=>{let{dispatch:dispatch}=_ref8;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig)return;const resource=entityConfig.__unstable_rest_base;await dispatch(resolvers_canUser("update",resource,recordId))},resolvers_getAutosaves=(postType,postId)=>async _ref9=>{let{dispatch:dispatch,resolveSelect:resolveSelect}=_ref9;const{rest_base:restBase,rest_namespace:restNamespace="wp/v2"}=await resolveSelect.getPostType(postType),autosaves=await(0,api_fetch_build_module.Z)({path:`/${restNamespace}/${restBase}/${postId}/autosaves?context=edit`});autosaves&&autosaves.length&&dispatch.receiveAutosaves(postId,autosaves)},resolvers_getAutosave=(postType,postId)=>async _ref10=>{let{resolveSelect:resolveSelect}=_ref10;await resolveSelect.getAutosaves(postType,postId)},resolvers_experimentalGetTemplateForLink=link=>async _ref11=>{let template,{dispatch:dispatch,resolveSelect:resolveSelect}=_ref11;try{template=await(0,api_fetch_build_module.Z)({url:(0,add_query_args.f)(link,{"_wp-find-template":!0})}).then((_ref12=>{let{data:data}=_ref12;return data}))}catch(e){}if(!template)return;const record=await resolveSelect.getEntityRecord("postType","wp_template",template.id);record&&dispatch.receiveEntityRecords("postType","wp_template",[record],{"find-template":link})};resolvers_experimentalGetTemplateForLink.shouldInvalidate=action=>("RECEIVE_ITEMS"===action.type||"REMOVE_ITEMS"===action.type)&&action.invalidateCache&&"postType"===action.kind&&"wp_template"===action.name;const resolvers_experimentalGetCurrentGlobalStylesId=()=>async _ref13=>{var _activeThemes$,_activeThemes$$_links,_activeThemes$$_links2,_activeThemes$$_links3;let{dispatch:dispatch,resolveSelect:resolveSelect}=_ref13;const activeThemes=await resolveSelect.getEntityRecords("root","theme",{status:"active"}),globalStylesURL=null==activeThemes||null===(_activeThemes$=activeThemes[0])||void 0===_activeThemes$||null===(_activeThemes$$_links=_activeThemes$._links)||void 0===_activeThemes$$_links||null===(_activeThemes$$_links2=_activeThemes$$_links["wp:user-global-styles"])||void 0===_activeThemes$$_links2||null===(_activeThemes$$_links3=_activeThemes$$_links2[0])||void 0===_activeThemes$$_links3?void 0:_activeThemes$$_links3.href;if(globalStylesURL){const globalStylesObject=await(0,api_fetch_build_module.Z)({url:globalStylesURL});dispatch.__experimentalReceiveCurrentGlobalStylesId(globalStylesObject.id)}},resolvers_experimentalGetCurrentThemeBaseGlobalStyles=()=>async _ref14=>{let{resolveSelect:resolveSelect,dispatch:dispatch}=_ref14;const currentTheme=await resolveSelect.getCurrentTheme(),themeGlobalStyles=await(0,api_fetch_build_module.Z)({path:`/wp/v2/global-styles/themes/${currentTheme.stylesheet}`});dispatch.__experimentalReceiveThemeBaseGlobalStyles(currentTheme.stylesheet,themeGlobalStyles)},resolvers_experimentalGetCurrentThemeGlobalStylesVariations=()=>async _ref15=>{let{resolveSelect:resolveSelect,dispatch:dispatch}=_ref15;const currentTheme=await resolveSelect.getCurrentTheme(),variations=await(0,api_fetch_build_module.Z)({path:`/wp/v2/global-styles/themes/${currentTheme.stylesheet}/variations`});dispatch.__experimentalReceiveThemeGlobalStyleVariations(currentTheme.stylesheet,variations)},resolvers_getCurrentThemeGlobalStylesRevisions=()=>async _ref16=>{var _record$_links,_record$_links$versio,_record$_links$versio2;let{resolveSelect:resolveSelect,dispatch:dispatch}=_ref16;const globalStylesId=await resolveSelect.__experimentalGetCurrentGlobalStylesId(),record=globalStylesId?await resolveSelect.getEntityRecord("root","globalStyles",globalStylesId):void 0,revisionsURL=null==record||null===(_record$_links=record._links)||void 0===_record$_links||null===(_record$_links$versio=_record$_links["version-history"])||void 0===_record$_links$versio||null===(_record$_links$versio2=_record$_links$versio[0])||void 0===_record$_links$versio2?void 0:_record$_links$versio2.href;if(revisionsURL){const resetRevisions=await(0,api_fetch_build_module.Z)({url:revisionsURL}),revisions=null==resetRevisions?void 0:resetRevisions.map((revision=>Object.fromEntries(Object.entries(revision).map((_ref17=>{let[key,value]=_ref17;return[(0,camel_case_dist_es2015.eV)(key),value]})))));dispatch.receiveThemeGlobalStyleRevisions(globalStylesId,revisions)}};resolvers_getCurrentThemeGlobalStylesRevisions.shouldInvalidate=action=>"SAVE_ENTITY_RECORD_FINISH"===action.type&&"root"===action.kind&&!action.error&&"globalStyles"===action.name;const resolvers_getBlockPatterns=()=>async _ref18=>{let{dispatch:dispatch}=_ref18;const restPatterns=await(0,api_fetch_build_module.Z)({path:"/wp/v2/block-patterns/patterns"});dispatch({type:"RECEIVE_BLOCK_PATTERNS",patterns:null==restPatterns?void 0:restPatterns.map((pattern=>Object.fromEntries(Object.entries(pattern).map((_ref19=>{let[key,value]=_ref19;return[(0,camel_case_dist_es2015.eV)(key),value]})))))})},resolvers_getBlockPatternCategories=()=>async _ref20=>{let{dispatch:dispatch}=_ref20;dispatch({type:"RECEIVE_BLOCK_PATTERN_CATEGORIES",categories:await(0,api_fetch_build_module.Z)({path:"/wp/v2/block-patterns/categories"})})},resolvers_getNavigationFallbackId=()=>async _ref21=>{var _fallback$_embedded;let{dispatch:dispatch}=_ref21;const fallback=await(0,api_fetch_build_module.Z)({path:(0,add_query_args.f)("/wp-block-editor/v1/navigation-fallback",{_embed:!0})}),record=null==fallback||null===(_fallback$_embedded=fallback._embedded)||void 0===_fallback$_embedded?void 0:_fallback$_embedded.self;dispatch.receiveNavigationFallbackId(null==fallback?void 0:fallback.id),record&&(dispatch.receiveEntityRecords("postType","wp_navigation",record),dispatch.finishResolution("getEntityRecord",["postType","wp_navigation",null==fallback?void 0:fallback.id]))};function deepCopyLocksTreePath(tree,path){const newTree={...tree};let currentNode=newTree;for(const branchName of path)currentNode.children={...currentNode.children,[branchName]:{locks:[],children:{},...currentNode.children[branchName]}},currentNode=currentNode.children[branchName];return newTree}function getNode(tree,path){let currentNode=tree;for(const branchName of path){const nextNode=currentNode.children[branchName];if(!nextNode)return null;currentNode=nextNode}return currentNode}function hasConflictingLock(_ref,locks){let{exclusive:exclusive}=_ref;return!(!exclusive||!locks.length)||!(exclusive||!locks.filter((lock=>lock.exclusive)).length)}const DEFAULT_STATE={requests:[],tree:{locks:[],children:{}}};function locks(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_STATE,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"ENQUEUE_LOCK_REQUEST":{const{request:request}=action;return{...state,requests:[request,...state.requests]}}case"GRANT_LOCK_REQUEST":{const{lock:lock,request:request}=action,{store:store,path:path}=request,storePath=[store,...path],newTree=deepCopyLocksTreePath(state.tree,storePath),node=getNode(newTree,storePath);return node.locks=[...node.locks,lock],{...state,requests:state.requests.filter((r=>r!==request)),tree:newTree}}case"RELEASE_LOCK":{const{lock:lock}=action,storePath=[lock.store,...lock.path],newTree=deepCopyLocksTreePath(state.tree,storePath),node=getNode(newTree,storePath);return node.locks=node.locks.filter((l=>l!==lock)),{...state,tree:newTree}}}return state}function isLockAvailable(state,store,path,_ref){let{exclusive:exclusive}=_ref;const storePath=[store,...path],locks=state.tree;for(const node of function*iteratePath(tree,path){let currentNode=tree;yield currentNode;for(const branchName of path){const nextNode=currentNode.children[branchName];if(!nextNode)break;yield nextNode,currentNode=nextNode}}(locks,storePath))if(hasConflictingLock({exclusive:exclusive},node.locks))return!1;const node=getNode(locks,storePath);if(!node)return!0;for(const descendant of function*iterateDescendants(node){const stack=Object.values(node.children);for(;stack.length;){const childNode=stack.pop();yield childNode,stack.push(...Object.values(childNode.children))}}(node))if(hasConflictingLock({exclusive:exclusive},descendant.locks))return!1;return!0}function createLocks(){let state=locks(void 0,{type:"@@INIT"});function processPendingLockRequests(){for(const request of function getPendingLockRequests(state){return state.requests}(state)){const{store:store,path:path,exclusive:exclusive,notifyAcquired:notifyAcquired}=request;if(isLockAvailable(state,store,path,{exclusive:exclusive})){const lock={store:store,path:path,exclusive:exclusive};state=locks(state,{type:"GRANT_LOCK_REQUEST",lock:lock,request:request}),notifyAcquired(lock)}}}return{acquire:function acquire(store,path,exclusive){return new Promise((resolve=>{state=locks(state,{type:"ENQUEUE_LOCK_REQUEST",request:{store:store,path:path,exclusive:exclusive,notifyAcquired:resolve}}),processPendingLockRequests()}))},release:function release(lock){state=locks(state,{type:"RELEASE_LOCK",lock:lock}),processPendingLockRequests()}}}function createLocksActions(){const locks=createLocks();return{__unstableAcquireStoreLock:function __unstableAcquireStoreLock(store,path,_ref){let{exclusive:exclusive}=_ref;return()=>locks.acquire(store,path,exclusive)},__unstableReleaseStoreLock:function __unstableReleaseStoreLock(lock){return()=>locks.release(lock)}}}var react=__webpack_require__("./node_modules/react/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js");const EMPTY_ARRAY=[],entityContexts={...rootEntitiesConfig.reduce(((acc,loader)=>(acc[loader.kind]||(acc[loader.kind]={}),acc[loader.kind][loader.name]={context:(0,react.createContext)(void 0)},acc)),{}),...additionalEntityConfigLoaders.reduce(((acc,loader)=>(acc[loader.kind]={},acc)),{})},getEntityContext=(kind,name)=>{if(!entityContexts[kind])throw new Error(`Missing entity config for kind: ${kind}.`);return entityContexts[kind][name]||(entityContexts[kind][name]={context:(0,react.createContext)(void 0)}),entityContexts[kind][name].context};function EntityProvider(_ref){let{kind:kind,type:name,id:id,children:children}=_ref;const Provider=getEntityContext(kind,name).Provider;return(0,react.createElement)(Provider,{value:id},children)}function useEntityId(kind,name){return(0,react.useContext)(getEntityContext(kind,name))}function useEntityProp(kind,name,prop,_id){const providerId=useEntityId(kind,name),id=null!=_id?_id:providerId,{value:value,fullValue:fullValue}=(0,use_select.Z)((select=>{const{getEntityRecord:getEntityRecord,getEditedEntityRecord:getEditedEntityRecord}=select("core"),record=getEntityRecord(kind,name,id),editedRecord=getEditedEntityRecord(kind,name,id);return record&&editedRecord?{value:editedRecord[prop],fullValue:record[prop]}:{}}),[kind,name,id,prop]),{editEntityRecord:editEntityRecord}=(0,use_dispatch.Z)("core");return[value,(0,react.useCallback)((newValue=>{editEntityRecord(kind,name,id,{[prop]:newValue})}),[kind,name,id,prop]),fullValue]}function useEntityBlockEditor(kind,name){let{id:_id}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const providerId=useEntityId(kind,name),id=null!=_id?_id:providerId,{content:content,blocks:blocks}=(0,use_select.Z)((select=>{const{getEditedEntityRecord:getEditedEntityRecord}=select("core"),editedRecord=getEditedEntityRecord(kind,name,id);return{blocks:editedRecord.blocks,content:editedRecord.content}}),[kind,name,id]),{__unstableCreateUndoLevel:__unstableCreateUndoLevel,editEntityRecord:editEntityRecord}=(0,use_dispatch.Z)("core");(0,react.useEffect)((()=>{if(content&&"function"!=typeof content&&!blocks){const parsedContent=(0,blocks_build_module.Qc)(content);editEntityRecord(kind,name,id,{blocks:parsedContent},{undoIgnore:!0})}}),[content]);const onChange=(0,react.useCallback)(((newBlocks,options)=>{const{selection:selection}=options,edits={blocks:newBlocks,selection:selection};if(blocks===edits.blocks)return __unstableCreateUndoLevel(kind,name,id);edits.content=_ref2=>{let{blocks:blocksForSerialization=[]}=_ref2;return(0,blocks_build_module.qm)(blocksForSerialization)},editEntityRecord(kind,name,id,edits)}),[kind,name,id,blocks]),onInput=(0,react.useCallback)(((newBlocks,options)=>{const{selection:selection}=options;editEntityRecord(kind,name,id,{blocks:newBlocks,selection:selection})}),[kind,name,id]);return[null!=blocks?blocks:EMPTY_ARRAY,onInput,onChange]}var memize=__webpack_require__("./node_modules/memize/index.js"),memoize=__webpack_require__.n(memize)();let Status;!function(Status){Status.Idle="IDLE",Status.Resolving="RESOLVING",Status.Error="ERROR",Status.Success="SUCCESS"}(Status||(Status={}));const META_SELECTORS=["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"];function useQuerySelect(mapQuerySelect,deps){return(0,use_select.Z)(((select,registry)=>mapQuerySelect((store=>enrichSelectors(select(store))),registry)),deps)}const enrichSelectors=memoize((selectors=>{const resolvers={};for(const selectorName in selectors)META_SELECTORS.includes(selectorName)||Object.defineProperty(resolvers,selectorName,{get:()=>function(){const{getIsResolving:getIsResolving,hasFinishedResolution:hasFinishedResolution}=selectors;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];const isResolving=!!getIsResolving(selectorName,args),hasResolved=!isResolving&&hasFinishedResolution(selectorName,args),data=selectors[selectorName](...args);let status;return status=isResolving?Status.Resolving:hasResolved?data?Status.Success:Status.Error:Status.Idle,{data:data,status:status,isResolving:isResolving,hasResolved:hasResolved}}});return resolvers}));function useEntityRecord(kind,name,recordId){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{enabled:!0};const{editEntityRecord:editEntityRecord,saveEditedEntityRecord:saveEditedEntityRecord}=(0,use_dispatch.Z)(store),mutations=(0,react.useMemo)((()=>({edit:record=>editEntityRecord(kind,name,recordId,record),save:function(){let saveOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return saveEditedEntityRecord(kind,name,recordId,{throwOnError:!0,...saveOptions})}})),[recordId]),{editedRecord:editedRecord,hasEdits:hasEdits}=(0,use_select.Z)((select=>({editedRecord:select(store).getEditedEntityRecord(kind,name,recordId),hasEdits:select(store).hasEditsForEntityRecord(kind,name,recordId)})),[kind,name,recordId]),{data:record,...querySelectRest}=useQuerySelect((query=>options.enabled?query(store).getEntityRecord(kind,name,recordId):null),[kind,name,recordId,options.enabled]);return{record:record,editedRecord:editedRecord,hasEdits:hasEdits,...querySelectRest,...mutations}}const use_entity_records_EMPTY_ARRAY=[];function useEntityRecords(kind,name){let queryArgs=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{enabled:!0};const queryAsString=(0,add_query_args.f)("",queryArgs),{data:records,...rest}=useQuerySelect((query=>options.enabled?query(store).getEntityRecords(kind,name,queryArgs):{data:use_entity_records_EMPTY_ARRAY}),[kind,name,queryAsString,options.enabled]);return{records:records,...rest}}function useResourcePermissions(resource,id){return useQuerySelect((resolve=>{const{canUser:canUser}=resolve(store),create=canUser("create",resource);if(!id){const read=canUser("read",resource),isResolving=create.isResolving||read.isResolving,hasResolved=create.hasResolved&&read.hasResolved;let status=Status.Idle;return isResolving?status=Status.Resolving:hasResolved&&(status=Status.Success),{status:status,isResolving:isResolving,hasResolved:hasResolved,canCreate:create.hasResolved&&create.data,canRead:read.hasResolved&&read.data}}const read=canUser("read",resource,id),update=canUser("update",resource,id),_delete=canUser("delete",resource,id),isResolving=read.isResolving||create.isResolving||update.isResolving||_delete.isResolving,hasResolved=read.hasResolved&&create.hasResolved&&update.hasResolved&&_delete.hasResolved;let status=Status.Idle;return isResolving?status=Status.Resolving:hasResolved&&(status=Status.Success),{status:status,isResolving:isResolving,hasResolved:hasResolved,canRead:hasResolved&&read.data,canCreate:hasResolved&&create.data,canUpdate:hasResolved&&update.data,canDelete:hasResolved&&_delete.data}}),[resource,id])}const entitySelectors=rootEntitiesConfig.reduce(((result,entity)=>{const{kind:kind,name:name}=entity;return result[getMethodName(kind,name)]=(state,key,query)=>getEntityRecord(state,kind,name,key,query),result[getMethodName(kind,name,"get",!0)]=(state,query)=>getEntityRecords(state,kind,name,query),result}),{}),entityResolvers=rootEntitiesConfig.reduce(((result,entity)=>{const{kind:kind,name:name}=entity;result[getMethodName(kind,name)]=(key,query)=>resolvers_getEntityRecord(kind,name,key,query);const pluralMethodName=getMethodName(kind,name,"get",!0);return result[pluralMethodName]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return resolvers_getEntityRecords(kind,name,...args)},result[pluralMethodName].shouldInvalidate=action=>resolvers_getEntityRecords.shouldInvalidate(action,kind,name),result}),{}),entityActions=rootEntitiesConfig.reduce(((result,entity)=>{const{kind:kind,name:name}=entity;return result[getMethodName(kind,name,"save")]=key=>saveEntityRecord(kind,name,key),result[getMethodName(kind,name,"delete")]=(key,query)=>deleteEntityRecord(kind,name,key,query),result}),{}),store=(0,redux_store.Z)("core",{reducer:build_module_reducer,actions:{...build_module_actions_namespaceObject,...entityActions,...createLocksActions()},selectors:{...build_module_selectors_namespaceObject,...entitySelectors},resolvers:{...resolvers_namespaceObject,...entityResolvers}});(0,build_module.z2)(store)}}]);